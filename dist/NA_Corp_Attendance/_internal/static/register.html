<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NA Corp - Registration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body class="bg-slate-950 text-white p-6">
    <div class="max-w-2xl mx-auto glass p-8 rounded-[2.5rem] border border-slate-800 shadow-2xl">
        <h1 class="text-3xl font-black text-center mb-8 italic">MEMBER <span class="text-blue-500">ENROLLMENT</span></h1>
        
        <form id="regForm" class="space-y-5">
            <input type="text" id="name" placeholder="Full Name" class="w-full bg-slate-900 border border-slate-700 p-4 rounded-2xl outline-none focus:border-blue-500" required>
            <input type="text" id="roll_no" placeholder="Roll Number (e.g. ME-01)" class="w-full bg-slate-900 border border-slate-700 p-4 rounded-2xl outline-none focus:border-blue-500" required>
            
            <div class="grid grid-cols-2 gap-4">
                <select id="deptSelect" class="bg-slate-900 border border-slate-700 p-4 rounded-2xl outline-none focus:border-blue-500 text-slate-400">
                    <option value="">Select Department</option>
                </select>
                <select id="classSelect" class="bg-slate-900 border border-slate-700 p-4 rounded-2xl outline-none focus:border-blue-500 text-slate-400">
                    <option value="">Select Class</option>
                </select>
            </div>

            <div class="bg-slate-900 p-6 rounded-3xl border-2 border-dashed border-slate-700 text-center">
                <video id="regVideo" autoplay class="w-48 h-48 mx-auto rounded-full object-cover mb-4 border-4 border-blue-500/20"></video>
                <button type="button" onclick="captureBase64()" class="text-xs font-bold text-blue-400 uppercase tracking-widest">Capture Face Identity</button>
            </div>

            <button type="submit" class="w-full bg-blue-600 py-5 rounded-2xl font-black text-xl hover:bg-blue-500 transition-all">FINALIZE REGISTRATION</button>
        </form>
    </div>

    <script>
        const SB_URL = "https://gazjbujwpbshxpbsagbn.supabase.co";
        const SB_KEY = "sb_publishable_JFaFDHaVymZYEm58jXNzxw_AgUzFMQY";
        const supabase = supabase.createClient(SB_URL, SB_KEY);

        // Load Dynamic Options
        async function loadOptions() {
            const { data: depts } = await supabase.from('departments').select('*');
            const { data: classes } = await supabase.from('classes').select('*');

            const dSelect = document.getElementById('deptSelect');
            depts.forEach(d => dSelect.innerHTML += `<option value="${d.id}">${d.name}</option>`);

            const cSelect = document.getElementById('classSelect');
            classes.forEach(c => cSelect.innerHTML += `<option value="${c.id}">${c.name}</option>`);
        }
        loadOptions();

        // Camera setup logic here (similar to your previous code)
    </script>
</body>
</html>